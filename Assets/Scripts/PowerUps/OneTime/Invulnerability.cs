using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : OneTimePowerUp
{
    [Header("Power Up Settings")]
    [SerializeField]
    private int numberOfHits = 1;

    private PlayerCollision _playerCollision;
    private int _startNumberOfCol = 0;
    protected override void ExecuteOnce()
    {
        base.ExecuteOnce();
        _playerCollision = FindObjectOfType<PlayerCollision>();
        _startNumberOfCol = _playerCollision.EnemyCollisionCount;

        _playerCollision.CanBeHitByEnemies(false);
    }

    public override void Activate()
    {
        base.Activate();
        if ((_playerCollision.EnemyCollisionCount - _startNumberOfCol) >= numberOfHits)
            Deactivate();
    }

    public override void Deactivate()
    {
        _playerCollision.CanBeHitByEnemies(true);
        base.Deactivate();
    }
}
