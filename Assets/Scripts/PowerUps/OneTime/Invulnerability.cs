using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : OneTimePowerUp
{
    private PlayerCollision _playerCollision;
    private int _startNumberOfCol = 0;

    // Stat
    private int _numberOfHits = 1;

    protected override void ExecuteOnce()
    {
        base.ExecuteOnce();

        // Read CurrentStat
        _numberOfHits = (int)powerUpData.CurrentStat; 

        _playerCollision = FindObjectOfType<PlayerCollision>();
        _startNumberOfCol = _playerCollision.EnemyCollisionCount;

        _playerCollision.CanBeHitByEnemies(false);
    }

    public override void Activate()
    {
        base.Activate();
        if ((_playerCollision.EnemyCollisionCount - _startNumberOfCol) >= _numberOfHits)
            Deactivate();
    }

    public override void Deactivate()
    {
        _playerCollision.CanBeHitByEnemies(true);
        base.Deactivate();
    }
}
